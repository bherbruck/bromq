# Multi-tenant MQTT Configuration Example
# For SaaS IoT platforms with isolated tenant namespaces

users:
  # Tenant A devices
  - username: tenant_a_devices
    password: ${TENANT_A_PASSWORD}
    description: "Tenant A IoT devices"
    metadata:
      tenant_id: "tenant-a"
      plan: "premium"
      max_devices: 100

  # Tenant B devices
  - username: tenant_b_devices
    password: ${TENANT_B_PASSWORD}
    description: "Tenant B IoT devices"
    metadata:
      tenant_id: "tenant-b"
      plan: "basic"
      max_devices: 10

  # Tenant C devices
  - username: tenant_c_devices
    password: ${TENANT_C_PASSWORD}
    description: "Tenant C IoT devices"
    metadata:
      tenant_id: "tenant-c"
      plan: "enterprise"
      max_devices: 1000

acl_rules:
  # Tenant A - isolated namespace with ${username} and ${clientid}
  - mqtt_username: tenant_a_devices
    topic_pattern: "tenants/tenant-a/${clientid}/#"
    permission: pubsub

  # Tenant B - isolated namespace
  - mqtt_username: tenant_b_devices
    topic_pattern: "tenants/tenant-b/${clientid}/#"
    permission: pubsub

  # Tenant C - isolated namespace
  - mqtt_username: tenant_c_devices
    topic_pattern: "tenants/tenant-c/${clientid}/#"
    permission: pubsub

# Optional: Bridge tenant data to central cloud platform
# bridges:
#   # Forward Tenant A data to their dedicated cloud instance
#   - name: tenant-a-cloud
#     remote_host: ${TENANT_A_CLOUD_HOST}
#     remote_port: 1883
#     remote_username: ${TENANT_A_CLOUD_USER}
#     remote_password: ${TENANT_A_CLOUD_PASSWORD}
#     metadata:
#       tenant_id: "tenant-a"
#     topics:
#       - local_pattern: "tenants/tenant-a/#"
#         remote_pattern: "cloud/customer-a/#"
#         direction: out
#         qos: 1
#
#   # Forward Tenant B data to shared cloud
#   - name: tenant-b-cloud
#     remote_host: shared-cloud.example.com
#     remote_port: 1883
#     remote_username: shared_bridge
#     remote_password: ${SHARED_CLOUD_PASSWORD}
#     metadata:
#       tenant_id: "tenant-b"
#     topics:
#       - local_pattern: "tenants/tenant-b/#"
#         remote_pattern: "shared/tenant-b/#"
#         direction: out
#         qos: 0
